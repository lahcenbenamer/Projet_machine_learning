<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Prédiction de Défaut de Paiement</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-5">
    <div class="card shadow p-4">
        <h2 class="text-primary mb-4">Prédiction de Défaut</h2>
        <!-- Garde le head et body comme dans ton fichier actuel -->

<form method="POST">
  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">Montant du crédit</label>
      <input name="LIMIT_BAL" class="form-control" required value="{{ request.form.get('LIMIT_BAL', '') }}">
    </div>

    <div class="col-md-6 mb-3">
      <label class="form-label">Âge</label>
      <input name="AGE" class="form-control" required value="{{ request.form.get('AGE', '') }}">
    </div>

    <div class="col-md-6 mb-3">
      <label class="form-label">Facture moyenne</label>
      <input name="avg_bill" class="form-control" required value="{{ request.form.get('avg_bill', '') }}">
    </div>

    <div class="col-md-6 mb-3">
      <label class="form-label">Paiement moyen</label>
      <input name="avg_pay" class="form-control" required value="{{ request.form.get('avg_pay', '') }}">
    </div>

    <div class="col-md-6 mb-3">
      <label class="form-label">Sexe</label>
      <select name="SEX" class="form-select">
        <option value="1" {% if request.form.get('SEX') == '1' %}selected{% endif %}>Homme</option>
        <option value="2" {% if request.form.get('SEX') == '2' %}selected{% endif %}>Femme</option>
      </select>
    </div>

    <div class="col-md-6 mb-3">
      <label class="form-label">Éducation</label>
      <select name="EDUCATION" class="form-select">
        <option value="1" {% if request.form.get('EDUCATION') == '1' %}selected{% endif %}>Graduate School</option>
        <option value="2" {% if request.form.get('EDUCATION') == '2' %}selected{% endif %}>Université</option>
        <option value="3" {% if request.form.get('EDUCATION') == '3' %}selected{% endif %}>Lycée</option>
        <option value="4" {% if request.form.get('EDUCATION') == '4' %}selected{% endif %}>Autre</option>
      </select>
    </div>

    <div class="col-md-6 mb-3">
      <label class="form-label">Statut marital</label>
      <select name="MARRIAGE" class="form-select">
        <option value="1" {% if request.form.get('MARRIAGE') == '1' %}selected{% endif %}>Marié(e)</option>
        <option value="2" {% if request.form.get('MARRIAGE') == '2' %}selected{% endif %}>Célibataire</option>
        <option value="3" {% if request.form.get('MARRIAGE') == '3' %}selected{% endif %}>Autres</option>
      </select>
    </div>
  </div>

  <div class="d-flex gap-3">
    <button type="submit" name="predict" class="btn btn-primary">Prédire</button>
    <button type="submit" name="metrics" class="btn btn-outline-secondary" formnovalidate>Voir les performances</button>
  </div>
</form>


        {% if result %}
        <div class="alert alert-info mt-4">{{ result }}</div>
        {% endif %}

        {% if show_metrics %}
        <div class="card mt-4 p-3 shadow-sm">
            <h4>Performances des modèles</h4>
            <img src="static/comparaison_modeles_scores.png" class="img-fluid mb-3"/>
            <table class="table table-bordered">
                <thead><tr><th>Modèle</th><th>Accuracy</th><th>Precision</th><th>Recall</th><th>F1-Score</th></tr></thead>
                <tbody>{% for model, metrics in model_scores.items() %}
                    <tr><td>{{ model }}</td><td>{{ metrics.accuracy }}</td><td>{{ metrics.precision }}</td><td>{{ metrics.recall }}</td><td>{{ metrics.f1_score }}</td></tr>
                {% endfor %}</tbody>
            </table>
        </div>
        {% endif %}
    </div>
</div>
</body>
</html>
